FROM node:18
WORKDIR /app

COPY package.json package.json
COPY package-lock.json package-lock.json

RUN npm install

COPY . .
RUN npm run build

# Эта команда запустит встроенный сервер на Node.js, который будет раздавать
# содержимое директории /app/build на порте 8000
CMD ["npx", "-y", "http-server", "-p", "8000", "/app/build"]

# Докерфайл надо поместить в папку frontend/ проекта Taski.
# В образе в папке app/build/ будут сохранены
# файлы статики (HTML, JS и CSS) фронтенд-приложения.

# При старте контейнера запускается встроенный веб-сервер разработки Node.js. 
# Статика раздаётся прямо из контейнера на порт 8000.

# Чтобы в образ не попали файлы зависимостей и сборки проекта,
# в директорию frontend/ добавьте .dockerignore.

# При сборке могут появляться warnings про версии пакетов — их можно игнорировать,
# так как эти пакеты используются только при сборке проекта.